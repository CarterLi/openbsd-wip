$OpenBSD$

strlcpy

Index: codemp/game/g_saga.c
--- codemp/game/g_saga.c.orig
+++ codemp/game/g_saga.c
@@ -195,7 +195,7 @@ void InitSiegeMode(void)
 	{
 		if (g_siegeTeam1.string[0] && Q_stricmp(g_siegeTeam1.string, "none"))
 		{ //check for override
-			strcpy(team1, g_siegeTeam1.string);
+			strlcpy(team1, g_siegeTeam1.string, sizeof(team1));
 		}
 		else
 		{ //otherwise use level default
@@ -204,7 +204,7 @@ void InitSiegeMode(void)
 
 		if (g_siegeTeam2.string[0] && Q_stricmp(g_siegeTeam2.string, "none"))
 		{ //check for override
-			strcpy(team2, g_siegeTeam2.string);
+			strlcpy(team2, g_siegeTeam2.string, sizeof(team2));
 		}
 		else
 		{ //otherwise use level default
@@ -337,12 +337,12 @@ void InitSiegeMode(void)
 
 		//Now count up the objectives for this team.
 		i = 1;
-		strcpy(objecStr, va("Objective%i", i));
+		strlcpy(objecStr, va("Objective%i", i), sizeof(objecStr));
 		while (BG_SiegeGetValueGroup(gParseObjectives, objecStr, objective))
 		{
 			objectiveNumTeam1++;
 			i++;
-			strcpy(objecStr, va("Objective%i", i));
+			strlcpy(objecStr, va("Objective%i", i), sizeof(objecStr));
 		}
 	}
 	if (BG_SiegeGetValueGroup(siege_info, team2, gParseObjectives))
@@ -354,17 +354,17 @@ void InitSiegeMode(void)
 
 		//Now count up the objectives for this team.
 		i = 1;
-		strcpy(objecStr, va("Objective%i", i));
+		strlcpy(objecStr, va("Objective%i", i), sizeof(objecStr));
 		while (BG_SiegeGetValueGroup(gParseObjectives, objecStr, objective))
 		{
 			objectiveNumTeam2++;
 			i++;
-			strcpy(objecStr, va("Objective%i", i));
+			strlcpy(objecStr, va("Objective%i", i), sizeof(objecStr));
 		}
 	}
 
 	//Set the configstring to show status of all current objectives
-	strcpy(gObjectiveCfgStr, "t1");
+	strlcpy(gObjectiveCfgStr, "t1", sizeof(gObjectiveCfgStr));
 	while (objectiveNumTeam1 > 0)
 	{ //mark them all as not completed since we just initialized
 		Q_strcat(gObjectiveCfgStr, 1024, "-0");
@@ -1954,7 +1954,7 @@ void G_SiegeClientExData(gentity_t *msgTarg)
 			}
 			else
 			{ //otherwise create the prepended chunk
-				strcpy(str, "sxd ");
+				strlcpy(str, "sxd ", sizeof(str));
 			}
 
 			//append the stats
