$OpenBSD$
Patch from upstream to support Okteta 0.8 libraries.
--- cmake/modules/FindLibOktetaKasten.cmake.orig	Fri Jun 24 23:04:01 2011
+++ cmake/modules/FindLibOktetaKasten.cmake	Fri Jan 20 01:52:47 2012
@@ -1,73 +1,141 @@
-# - Find Kasten library
+# - Find Okteta Kasten libraries, v0 or v1
 #
 # This module defines
-#  LIBOKTETAKASTEN_FOUND - whether the libkasten libraries were found
-#  LIBOKTETAKASTEN_LIBRARIES - the libkasten libraries
-#  LIBOKTETAKASTEN_INCLUDE_DIR - the include path of the libkasten libraries
+#  LIBOKTETAKASTEN_FOUND - whether the Okteta Kasten libraries were found
+#  LIBOKTETAKASTEN_VERSION - version of the Okteta Kasten libraries found
+#  LIBOKTETAKASTEN_LIBRARIES - the Okteta Kasten libraries
+#  LIBOKTETAKASTEN_INCLUDE_DIRS - the include paths of the Okteta Kasten libraries
 
 
-if( LIBOKTETAKASTEN_INCLUDE_DIR AND LIBOKTETAKASTEN_LIBRARIES )
+if( LIBOKTETAKASTEN_INCLUDE_DIRS AND LIBOKTETAKASTEN_LIBRARIES AND LIBOKTETAKASTEN_VERSION )
     # Already in cache, be silent
     set( OktetaKasten_FIND_QUIETLY TRUE )
-endif( LIBOKTETAKASTEN_INCLUDE_DIR AND LIBOKTETAKASTEN_LIBRARIES )
+endif( LIBOKTETAKASTEN_INCLUDE_DIRS AND LIBOKTETAKASTEN_LIBRARIES AND LIBOKTETAKASTEN_VERSION )
 
 
-find_library( LIBOKTETAKASTENCORE_LIBRARY
-  NAMES
-  oktetakastencore
-  HINTS
-  ${LIB_INSTALL_DIR}
-  ${KDE4_LIB_DIR}
+# First search version 1
+find_library( LIBOKTETA1KASTEN1CORE_LIBRARY
+    NAMES
+    kasten1okteta1core
+    HINTS
+    ${LIB_INSTALL_DIR}
+    ${KDE4_LIB_DIR}
 )
 
-find_library( LIBOKTETAKASTENGUI_LIBRARY
-  NAMES
-  oktetakastengui
-  HINTS
-  ${LIB_INSTALL_DIR}
-  ${KDE4_LIB_DIR}
+find_library( LIBOKTETA1KASTEN1GUI_LIBRARY
+    NAMES
+    kasten1okteta1gui
+    HINTS
+    ${LIB_INSTALL_DIR}
+    ${KDE4_LIB_DIR}
 )
 
-find_library( LIBOKTETAKASTENCONTROLLERS_LIBRARY
-  NAMES
-  oktetakastencontrollers
-  HINTS
-  ${LIB_INSTALL_DIR}
-  ${KDE4_LIB_DIR}
+find_library( LIBOKTETA1KASTEN1CONTROLLERS_LIBRARY
+    NAMES
+    kasten1okteta1controllers
+    HINTS
+    ${LIB_INSTALL_DIR}
+    ${KDE4_LIB_DIR}
 )
 
-set( LIBOKTETAKASTEN_LIBRARIES
-  ${LIBOKTETAKASTENCORE_LIBRARY}
-  ${LIBOKTETAKASTENGUI_LIBRARY}
-  ${LIBOKTETAKASTENCONTROLLERS_LIBRARY}
-)
 
-
 find_path( LIBOKTETAKASTEN_INCLUDE_DIR
-  NAMES
-  bytearraydocument.h
-  PATH_SUFFIXES
-  kasten
-  HINTS
-  ${INCLUDE_INSTALL_DIR}
-  ${KDE4_INCLUDE_DIR}
+    NAMES
+    bytearraydocument.h
+    PATH_SUFFIXES
+    kasten1/okteta1
+    HINTS
+    ${INCLUDE_INSTALL_DIR}
+    ${KDE4_INCLUDE_DIR}
 )
 
-if( LIBOKTETAKASTEN_INCLUDE_DIR AND LIBOKTETAKASTEN_LIBRARIES )
-   set( LIBOKTETAKASTEN_FOUND  TRUE )
-else( LIBOKTETAKASTEN_INCLUDE_DIR AND LIBOKTETAKASTEN_LIBRARIES )
-   set( LIBOKTETAKASTEN_FOUND  FALSE )
-endif( LIBOKTETAKASTEN_INCLUDE_DIR AND LIBOKTETAKASTEN_LIBRARIES )
+if( LIBOKTETAKASTEN_INCLUDE_DIR AND
+    LIBOKTETA1KASTEN1CORE_LIBRARY AND LIBOKTETA1KASTEN1GUI_LIBRARY AND LIBOKTETA1KASTEN1CONTROLLERS_LIBRARY )
+    set( LIBOKTETAKASTEN_FOUND  TRUE )
+endif( LIBOKTETAKASTEN_INCLUDE_DIR AND
+    LIBOKTETA1KASTEN1CORE_LIBRARY AND LIBOKTETA1KASTEN1GUI_LIBRARY AND LIBOKTETA1KASTEN1CONTROLLERS_LIBRARY )
 
+if( LIBOKTETAKASTEN_FOUND )
+    set( LIBOKTETAKASTEN_VERSION 1 )
+    set( LIBOKTETAKASTEN_LIBRARIES
+        ${LIBOKTETA1KASTEN1CORE_LIBRARY}
+        ${LIBOKTETA1KASTEN1GUI_LIBRARY}
+        ${LIBOKTETA1KASTEN1CONTROLLERS_LIBRARY}
+    )
+    set( LIBOKTETAKASTEN_INCLUDE_DIRS
+        ${LIBOKTETAKASTEN_INCLUDE_DIR}
+    )
+endif( LIBOKTETAKASTEN_FOUND )
 
+# Then search version 0
+if( NOT LIBOKTETAKASTEN_FOUND )
+    find_library( LIBOKTETAKASTENCORE0_LIBRARY
+        NAMES
+        oktetakastencore
+        HINTS
+        ${LIB_INSTALL_DIR}
+        ${KDE4_LIB_DIR}
+    )
+
+    find_library( LIBOKTETAKASTENGUI0_LIBRARY
+        NAMES
+        oktetakastengui
+        HINTS
+        ${LIB_INSTALL_DIR}
+        ${KDE4_LIB_DIR}
+    )
+
+    find_library( LIBOKTETAKASTENCONTROLLERS0_LIBRARY
+        NAMES
+        oktetakastencontrollers
+        HINTS
+        ${LIB_INSTALL_DIR}
+        ${KDE4_LIB_DIR}
+    )
+
+
+    find_path( LIBOKTETAKASTEN0_INCLUDE_DIR
+        NAMES
+        bytearraydocument.h
+        PATH_SUFFIXES
+        kasten
+        HINTS
+        ${INCLUDE_INSTALL_DIR}
+        ${KDE4_INCLUDE_DIR}
+    )
+
+    if( LIBOKTETAKASTEN0_INCLUDE_DIR AND
+        LIBOKTETAKASTENCORE0_LIBRARY AND LIBOKTETAKASTENGUI0_LIBRARY AND LIBOKTETAKASTENCONTROLLERS0_LIBRARY )
+        set( LIBOKTETAKASTEN_FOUND  TRUE )
+    endif( LIBOKTETAKASTEN0_INCLUDE_DIR AND
+        LIBOKTETAKASTENCORE0_LIBRARY AND LIBOKTETAKASTENGUI0_LIBRARY AND LIBOKTETAKASTENCONTROLLERS0_LIBRARY )
+
+    if( LIBOKTETAKASTEN_FOUND )
+        set( LIBOKTETAKASTEN_VERSION 0 )
+        set( LIBOKTETAKASTEN_INCLUDE_DIRS
+            ${LIBOKTETAKASTEN0_INCLUDE_DIR}
+        )
+        set( LIBOKTETAKASTEN_LIBRARIES
+            ${LIBOKTETAKASTENCORE0_LIBRARY}
+            ${LIBOKTETAKASTENGUI0_LIBRARY}
+            ${LIBOKTETAKASTENCONTROLLERS0_LIBRARY}
+        )
+    endif( LIBOKTETAKASTEN_FOUND )
+endif( NOT LIBOKTETAKASTEN_FOUND )
+
+
 if( LIBOKTETAKASTEN_FOUND )
-   if( NOT OktetaKasten_FIND_QUIETLY )
-      message( STATUS "Found Okteta Kasten libraries: ${LIBOKTETAKASTEN_LIBRARIES}" )
-   endif( NOT OktetaKasten_FIND_QUIETLY )
+    if( NOT OktetaKasten_FIND_QUIETLY )
+        message( STATUS "Found Okteta Kasten libraries v${LIBOKTETAKASTEN_VERSION}: ${LIBOKTETAKASTEN_LIBRARIES}" )
+    endif( NOT OktetaKasten_FIND_QUIETLY )
 else( LIBOKTETAKASTEN_FOUND )
-   if( LibKasten_FIND_REQUIRED )
-      message( FATAL_ERROR "Could not find Okteta Kasten libraries" )
-   endif( LibKasten_FIND_REQUIRED )
+    if( LibKasten_FIND_REQUIRED )
+        message( FATAL_ERROR "Could not find Okteta Kasten libraries" )
+    endif( LibKasten_FIND_REQUIRED )
 endif( LIBOKTETAKASTEN_FOUND )
 
-mark_as_advanced( LIBOKTETAKASTEN_INCLUDE_DIR LIBOKTETAKASTEN_LIBRARIES )
+mark_as_advanced(
+    LIBOKTETAKASTEN_INCLUDE_DIRS
+    LIBOKTETAKASTEN_LIBRARIES
+    LIBOKTETAKASTEN_VERSION
+)
